{% extends "base.html" %}

{% block miolo %}
    <main class="container my-5">
        <h2 class="text-center mb-4">Nossos Destaques</h2>
        
        <!-- O carrossel será preenchido dinamicamente com os produtos de destaque -->
        <div id="productCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="8000">
            <div class="carousel-inner">
                
                <!-- A mágica acontece aqui: vamos iterar sobre os produtos de destaque -->
                {% for produto in produtos_destaque %}
                    <!-- Para o primeiro item, a classe 'active' é necessária para que ele apareça -->
                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                        <div class="row row-cols-1 row-cols-md-3 g-4 justify-content-center">
                            
                            <!-- Vamos exibir apenas 1 produto por slide. Você pode ajustar isso se quiser -->
                            <div class="col">
                                <div class="card h-100">
                                    <!-- A URL da imagem vem do banco de dados, do campo 'imagem_url' -->
                                    <img src="{{ produto.imagem_url }}" class="card-img-top" alt="{{ produto.nome }}">
                                    
                                    <div class="card-body text-center">
                                        <!-- Os dados (nome, descrição, preço) também vêm do banco de dados -->
                                        <h5 class="card-title">{{ produto.nome }}</h5>
                                        <p class="card-text">{{ produto.descricao }}</p>
                                        <p class="card-text">R$ {{ produto.preco }}</p>
                                        <a href="#" class="btn btn-destaque" style="background-color: var(--cor-destaque); color: #fff;">Comprar</a>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                {% empty %}
                    <!-- Esta parte será exibida se não houver produtos de destaque cadastrados -->
                    <div class="carousel-item active">
                        <div class="row justify-content-center">
                            <div class="col-12 text-center">
                                <p class="text-muted">Nenhum produto em destaque encontrado.</p>
                                <p>Por favor, adicione produtos no painel de administração e marque a caixa "Destaque".</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                
            </div>
            
            <!-- Controles do carrossel (botões de próxima e anterior) -->
            <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Anterior</span>
            </button>
            
            <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Próximo</span>
            </button>
        </div>
    </main>
{% endblock miolo %}